name: Curl Component Direct Input
description: A component that executes a curl command and returns the JSON output.
inputs:
  - {name: curl_command, type: String, description: 'The full curl command to execute'}
outputs:
  - {name: output_json, type: Json, description: 'The JSON output from curl'}

implementation:
  container:
    image: 'ubuntu:20.04'  # Base image
    command:
      - sh
      - -c
      - |
        apt-get update && apt-get install -y curl jq  # Install curl and jq
        mkdir -p $(dirname "$1")  # Ensure output directory exists
        echo "Executing curl command: ${0}"  # Print the curl command being executed
        result=$(eval "${0}")  # Execute the input curl command and store the output
        echo "$result"  # Directly print the output of the curl command
        echo "$result" | jq '.' > "$1"  # Ensure output is in JSON format and save to the output path
    args:
      - {inputValue: curl_command}
      - {outputPath: output_json}
