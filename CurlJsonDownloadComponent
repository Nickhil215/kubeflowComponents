name: Curl Component Direct Input
description: A component that executes a curl command and returns the JSON output.
inputs:
  - {name: curl_command, type: String, description: 'The full curl command to execute'}
outputs:
  - {name: output_json, type: Json, description: 'The JSON output from curl'}

implementation:
  container:
    image: 'ubuntu:20.04'  # Base image
    command:
      - sh
      - -c
      - |
        apt-get update && apt-get install -y curl jq  # Install curl and jq
        mkdir -p $(dirname "$1")  # Ensure output directory exists
        eval "${0}" | tee /tmp/output.json  # Execute the input curl command
        jq '.' /tmp/output.json > "$1"  # Ensure output is in JSON format
        cat /tmp/output.json
    args:
      - {inputValue: curl_command}
      - {outputPath: output_json}
